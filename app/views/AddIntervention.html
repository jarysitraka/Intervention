<div ng-include="'views/layout/header.html'"></div>
<div ng-include="'views/layout/navigation.html'"></div>
<style>
    .error{
        color: red !important;
    }
</style>


<div class="container">



    <div class="row">
        <div class="col s12 m12">
            <div class="card white">
                <div class="card-content">
                    <h4 class="card-title center">Créer une nouvelle Intervention</h4>

                        <div class="row">
                            <ul class="tabs">
                                <li class="tab col s2"><a class="active" href="#basiquetab">Générale</a></li>
                                <li id="tabclient" class="tab col s2 " ><a  href="#clienttab">Client</a></li>
                                <li id="tabgroup" class="tab col s3 " ><a href="#grouptab">Groupe d'intervention</a></li>
                                <li id="tabwork" class="tab col s2 " ><a href="#worktab">Tarification</a></li>
                                <li id="tabsupp" class="tab col s3 " ><a href="#supptab">Infromations additionelles</a></li>
                            </ul>

                            <div class="container">
                                <form id="basiquetab" class="col s12" name="basique">
                                    <div class="row">
                                        <div class="input-field col s6">

                                            <input   placeholder="Nom" name="name" id="name" type="text" class="validate" >
                                            <label for="name">  </label>
                                        </div>

                                        <div class="input-field col s6">
                                            <input placeholder="Indicaction" name="indicaction" id="indicaction" type="text" class="validate">
                                            <label for="indicaction" ></label>
                                        </div>

                                    </div>

                                    <div class="row">
                                        <div class="input-field col s6">
                                            <label for="debut">Date début</label>
                                            <input name="debut" id="debut" type="text" class="validate datepicker">
                                        </div>
                                        <div class="input-field col s6">
                                            <input  name = "fin"  id="fin" type="text"  class="validate datepicker">
                                            <label for="fin">Date fin</label>
                                        </div>
                                    </div>

                                    <button id="basiqueconfirmed" type="button" class="btn green" >Suivant</button>

                                </form>
                            </div>
                            <div class="container">
                                <form id="clienttab" class="col s12" name="client">

                                    <div class="row">
                                            <div class="input-field col s12">
                                                <i class="material-icons prefix">perm_identity</i>
                                                <input type="text" name="client" id="autocomplete-client" class="autocomplete">
                                                <label for="autocomplete-client"></label>
                                                <a class="btn-floating btn waves-effect waves-light blue darken-1 right"><i class="material-icons small">add</i></a>
                                            </div>
                                    </div>
                                    <button id="clientconfirmed" type="button" class="btn green" >Suivant</button>

                                </form>
                            </div>

                            <div class="container">
                                <form id="grouptab" class="col s12" name="group">
                                    <div class="row">
                                        <div class="input-field col s12">
                                            <i class="material-icons prefix">supervisor_account</i>
                                            <input type="text" name="group" id="autocomplete-group" class="autocomplete">
                                            <label for="autocomplete-group"></label>
                                            <a class="btn-floating btn waves-effect waves-light blue darken-1 right"><i class="material-icons small">add</i></a>
                                        </div>
                                    </div>
                                    <button id="groupconfirmed" type="button" class="btn green" >Suivant</button>
                                </form>
                            </div>

                            <div class="container">
                                <form id="worktab" class="col s12" name="group">
                                    <div class="row">
                                        <div class="input-field col s12">
                                            <i class="material-icons prefix">supervisor_account</i>
                                            <input type="text" name="group" id="autocomplete-work" class="autocomplete" multiple>
                                            <label for="autocomplete-work"></label>
                                        </div>
                                    </div>
                                    <button id="workconfirmed" type="button" class="btn green" >Suivant</button>
                                </form>
                            </div>

                            <div class="container">
                                <form id="supptab" class="col s12" name="supp">
                                    <div class="row">
                                        <div class="input-field col s5">
                                            <input placeholder="work" type="text" name="group" id="autocomplete-supp" class="autocomplete" multiple>
                                            <div id="additionnel"></div>
                                            <a id="suppwork" class="btn-floating btn waves-effect waves-light red darken-1 left"><i class="material-icons small">delete</i></a>
                                            <a id="ajoutwork" class="btn-floating btn waves-effect waves-light blue darken-1 right"><i class="material-icons small">add</i></a>

                                        </div>

                                        <div class="col s1 ">&nbsp;</div>

                                        <div class=" col s5">
                                            <div class="row">
                                                <div class=" switch">
                                                    <label>
                                                        Non
                                                            <input id="lier" type="checkbox">
                                                            <span class="lever"></span>
                                                        Lier avec un projet
                                                    </label>
                                                </div>
                                            </div>
                                            <div id ="formProject"  class="row">
                                                <label for="autocomplete-project"></label>
                                                <input type="text" name="project" id="autocomplete-project" class="autocomplete" multiple>
                                            </div>
                                        </div>
                                    </div>

                                    <button id="suppconfirmed" type="button" class="btn green modal-trigger" href="#confirmation" >Validate Intervention</button>
                                </form>
                            </div>

                        </div>




                </div>
            </div>
        </div>
    </div>

</div>
<div id="confirmation" class="modal modal-fixed-footer">
    <div class="modal-content">
        <h4 class="center yellow-text">Confirmation d'ajout d'intervention</h4>
        <p>A bunch of text</p>
    </div>
    <div class="modal-footer">
        <a  class="modal-action modal-close waves-effect waves-green btn-flat ">Agree</a>
    </div>
</div>

<script>



    $(document).ready(function(){



        $('ul.tabs').tabs();
        $('.modal-trigger').leanModal();

        var int= $('#lier');
        var on = int.val();


            $('#formProject').contents().hide();

            int.change(function () {
                $('#formProject').contents().show();
            });





    });

    $('.datepicker').pickadate({
        selectMonths: true, // Creates a dropdown to control month
        selectYears: 15 // Creates a dropdown of 15 years to control year
    });

    jQuery.validator.setDefaults({
        debug: true,
        success: "valid"
    });
    var formBase=$("form[name='basique']");
    var formClient=$("form[name='client']");
    var formGroup=$("form[name='group']");

    formBase.validate({

        rules: {
            name: "required",
            indicaction: "required"

        },
        messages: {
            name: "Une intervention a besoin d'un nom",
            indicaction: "petite indicaction sur l'intervention"
        }
    });

    formClient.validate({

        rules: {
            client: "required"

        },
        messages: {
            client: "veuillez choisir un client pour cette intervention, sinon, ajouter en un"
        }
    });

    formGroup.validate({

        rules: {
            group: "required"

        },
        messages: {
            group: "veuillez choisir une équipe"
        }
    });



    $( "#basiqueconfirmed" ).click(function() {
        if(formBase.valid()==true){
            $('#tabclient').removeClass( "disabled" );
            $('ul.tabs').tabs('select_tab', 'clienttab');
        }
        else {
            Materialize.toast("Veuillez lire les instructions sur le formulaire", 3000, 'red');
            $('#tabclient').addClass( "disabled" );
        }
    });

    $( "#clientconfirmed" ).click(function() {
        if(formClient.valid()==true){
            $('#tabgroup').removeClass( "disabled" );
            $('ul.tabs').tabs('select_tab', 'grouptab');
        }
        else {
            $('#tabgroup').addClass( "disabled" );
        }
    });

    $( "#groupconfirmed" ).click(function() {
        if(formGroup.valid()==true){
            $('#tabsupp').removeClass( "disabled" );
            $('ul.tabs').tabs('select_tab', 'supptab');
        }
        else {
            $('#tabsupp').addClass( "disabled" );
        }
    });

    /*$( "#workconfirmed" ).click(function() {
        if(formGroup.valid()==true){
            $('#tabsupp').removeClass( "disabled" );
            $('ul.tabs').tabs('select_tab', 'worktab');
        }
        else {
            $('#tabsupp').addClass( "disabled" );
        }
    });*/

    $('#autocomplete-client').autocomplete({
        data: {
            "Apple": null,
            "Microsoft": null,
            "Google": 'http://placehold.it/250x250'
        }
    });

    $('#autocomplete-group').autocomplete({
        data: {
            "Apple": null,
            "Microsoft": null,
            "Google": 'http://placehold.it/250x250'
        }
    });

    $('#autocomplete-work').autocomplete({
        data: {
            "Apple": null,
            "Microsoft": null,
            "Google": 'http://placehold.it/250x250'
        }
    });

    $('#autocomplete-project').autocomplete({
        data: {
            "Apple": null,
            "Microsoft": null,
            "Google": 'http://placehold.it/250x250'
        }
    });

    $('#ajoutwork').click(function () {
        $('#additionnel').append("<input placeholder='work' type='text''  class='autocomplete'>");
    });

    $('#suppwork').click(function () {
        $('#additionnel').contents().remove();
    });

</script>