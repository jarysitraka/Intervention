<!DOCTYPE html>
<html ng-app="myApp">
<head>
    <meta charset="UTF-8">
    <title>My first page angular</title>
    <script src="../node_modules/angular/angular.js"></script>
    <script src="../node_modules/angular-route/angular-route.js"></script>
</head>
<body >

    <div ng-view></div>

    <script>

        var myApp = angular.module('myApp',['ngRoute']);


        myApp.config(['$routeProvider',function($routeProvider){
            $routeProvider
                    .when('/',{templateUrl: 'views/home.html', controller: 'PostsCtrl'})
                    .when('/comments/:id',{templateUrl: 'views/comments.html', controller : 'CommentsCtrl'})
                    .otherwise({redirectTo : '/'});
        }]);


        myApp.factory('PostsFactory',function () {

            var factory = {
                posts :[
                    {
                        "id": 0,
                        "name": "Splinx",
                        "content": "Reprehenderit culpa et sint occaecat enim irure.",
                        "comments": [
                            {
                                "username": "Lawrence",
                                "city": "Limestone",
                                "email": "lawrenceholder@splinx.com",
                                "content": "Deserunt ut incididunt commodo ea sint do eiusmod aute culpa ea."
                            },
                            {
                                "username": "Jessie",
                                "city": "Ronco",
                                "email": "jessieholder@splinx.com",
                                "content": "Nulla enim reprehenderit consectetur esse esse ipsum."
                            }
                        ]
                    },
                    {
                        "id": 1,
                        "name": "Flum",
                        "content": "Lorem aliqua aliqua Lorem esse qui eiusmod non exercitation enim voluptate consequat enim labore.",
                        "comments": [
                            {
                                "username": "Fay",
                                "city": "Jugtown",
                                "email": "fayholder@flum.com",
                                "content": "Reprehenderit adipisicing exercitation incididunt deserunt proident ea exercitation."
                            },
                            {
                                "username": "Eleanor",
                                "city": "Falconaire",
                                "email": "eleanorholder@flum.com",
                                "content": "Non labore dolore id veniam id sunt nulla eu ut culpa reprehenderit incididunt qui."
                            },
                            {
                                "username": "Jackson",
                                "city": "Dixie",
                                "email": "jacksonholder@flum.com",
                                "content": "Consectetur magna officia aute dolore culpa mollit tempor mollit qui reprehenderit qui."
                            }
                        ]
                    },
                    {
                        "id": 2,
                        "name": "Otherside",
                        "content": "Ea reprehenderit tempor commodo commodo cillum consectetur incididunt ullamco laborum elit adipisicing laborum exercitation.",
                        "comments": [
                            {
                                "username": "Mollie",
                                "city": "Imperial",
                                "email": "mollieholder@otherside.com",
                                "content": "Lorem excepteur voluptate velit tempor nulla consectetur ad ea do deserunt qui enim est tempor."
                            },
                            {
                                "username": "Fletcher",
                                "city": "Sims",
                                "email": "fletcherholder@otherside.com",
                                "content": "Ipsum laboris Lorem nisi exercitation tempor."
                            },
                            {
                                "username": "Judy",
                                "city": "Soham",
                                "email": "judyholder@otherside.com",
                                "content": "Veniam sit culpa adipisicing consectetur fugiat ullamco ad Lorem excepteur dolore sint Lorem enim irure."
                            }
                        ]
                    },
                    {
                        "id": 3,
                        "name": "Combogene",
                        "content": "Ad ut minim est esse non aliquip laboris consectetur cillum mollit cupidatat.",
                        "comments": [
                            {
                                "username": "Herminia",
                                "city": "Outlook",
                                "email": "herminiaholder@combogene.com",
                                "content": "Commodo exercitation cupidatat voluptate fugiat Lorem deserunt cillum ex anim nulla enim mollit sint commodo."
                            },
                            {
                                "username": "York",
                                "city": "Greenwich",
                                "email": "yorkholder@combogene.com",
                                "content": "Eu nostrud ea est laboris excepteur occaecat incididunt qui laborum duis fugiat."
                            },
                            {
                                "username": "Eileen",
                                "city": "Sedley",
                                "email": "eileenholder@combogene.com",
                                "content": "Consequat ea eiusmod est sit consequat minim nostrud."
                            }
                        ]
                    },
                    {
                        "id": 4,
                        "name": "Ersum",
                        "content": "Veniam consectetur aute laborum dolore velit cupidatat magna reprehenderit in.",
                        "comments": [
                            {
                                "username": "Collier",
                                "city": "Biehle",
                                "email": "collierholder@ersum.com",
                                "content": "Elit ipsum nostrud dolor consectetur nulla ad dolor non cillum ullamco."
                            },
                            {
                                "username": "Berta",
                                "city": "Kingstowne",
                                "email": "bertaholder@ersum.com",
                                "content": "Enim ad minim proident aute do."
                            },
                            {
                                "username": "Schmidt",
                                "city": "Wyoming",
                                "email": "schmidtholder@ersum.com",
                                "content": "Excepteur aliqua reprehenderit sint irure pariatur ea occaecat nisi in cillum elit nulla proident aute."
                            }
                        ]
                    },
                    {
                        "id": 5,
                        "name": "Unq",
                        "content": "Anim esse fugiat amet proident eu proident pariatur.",
                        "comments": [
                            {
                                "username": "Lynn",
                                "city": "Nadine",
                                "email": "lynnholder@unq.com",
                                "content": "Sint in reprehenderit deserunt eu pariatur et ea excepteur quis deserunt aute irure."
                            }
                        ]
                    }
                ],
                getPosts :function(){
                    return factory.posts;
                },
                getPost :function (id) {
                    var post = {};
                    angular.forEach(factory.posts, function(value, key) {
                        if(value.id==id){
                            post = value;
                        }
                    });
                    return post;
                }
            };

            return factory;
        });

        myApp.controller('PostsCtrl',function ($scope, PostsFactory) {
            $scope.posts = PostsFactory.getPosts();
        });

        myApp.controller('CommentsCtrl', function($scope, PostsFactory , $routeParams) {
            var post = PostsFactory.getPost($routeParams.id);
            $scope.title= post.name;
            $scope.comments = post.comments;
        });

    </script>

</body>
</html>